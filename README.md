# I-Compiler

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–ª—è —è–∑—ã–∫–∞ Project I —Å –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–º, —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –õ–µ–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (Lexer)
```bash
make build/lexer
./build/lexer tests/001_expressions.pi
```

### 2. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (Parser)
```bash
make build/parser
./build/parser tests/001_expressions.pi
```

### 3. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä (Semantic Analyzer) ‚ú® –ù–û–í–û–ï
```bash
make build/semantic_analyzer
./build/semantic_analyzer tests/001_expressions.pi
```

### 4. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤ WebAssembly (WASM Compiler) üöÄ –ù–û–í–û–ï
```bash
make build/wasm_compiler
./build/wasm_compiler tests/001_expressions.pi output.wat
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
./run_wasm_test.sh tests/001_expressions.pi
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
```bash
make all
```

–≠—Ç–æ —Å–æ–±–µ—Ä—ë—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –≤–∫–ª—é—á–∞—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤ WebAssembly.

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
```bash
chmod +x run_semantic_tests.sh
./run_semantic_tests.sh
```

## –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä

### –ü—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç AST)
1. ‚úì –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
2. ‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `return` (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π)
3. ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç AST)
1. ‚úì –°–≤—ë—Ä—Ç–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç (`5 + 3` ‚Üí `8`, `3 < 5` ‚Üí `true`)
2. ‚úì –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–æ–≥–æ –∫–æ–¥–∞ (–ø–æ—Å–ª–µ `return`)
3. ‚úì –£–ø—Ä–æ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (`if true` ‚Üí —Ç–µ–ª–æ then)
4. ‚úì –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [SEMANTIC_ANALYZER.md](SEMANTIC_ANALYZER.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [PRESENTATION.md](PRESENTATION.md) - –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

## –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
- `tests/001_expressions.pi` - –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- `tests/015_function_return_and_call.pi` - —Ñ—É–Ω–∫—Ü–∏–∏
- `tests/006_use_before_declaration.pi` - –æ—à–∏–±–∫–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

### –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- `tests/semantic_001_constant_folding.pi` - —Å–≤—ë—Ä—Ç–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- `tests/semantic_002_unreachable_code.pi` - –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º—ã–π –∫–æ–¥
- `tests/semantic_003_if_simplification.pi` - —É–ø—Ä–æ—â–µ–Ω–∏–µ if
- `tests/semantic_004_unused_variables.pi` - –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `tests/semantic_005_return_outside_routine.pi` - –æ—à–∏–±–∫–∞: return –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `tests/semantic_006_all_optimizations.pi` - –≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
I-Compiler/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lexer.cpp               # –õ–µ–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ parser.cpp              # –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ semantic_analyzer.cpp   # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ wasm_compiler.cpp        # –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤ WebAssembly
‚îú‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ build/                      # –°–æ–±—Ä–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ run_semantic_tests.sh       # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ run_wasm_test.sh            # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ WASM
‚îú‚îÄ‚îÄ README.md                   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ SEMANTIC_ANALYZER.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îî‚îÄ‚îÄ PRESENTATION.md             # –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
```

## –ö–æ–º–∞–Ω–¥—ã Make

```bash
make all                        # –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
make build/lexer               # –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–µ–∫—Å–µ—Ä
make build/parser              # –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–µ—Ä
make build/semantic_analyzer   # –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
make build/wasm_compiler       # –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä WASM
make clean                     # –£–¥–∞–ª–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤ WebAssembly

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ —è–∑—ã–∫–µ Project I –≤ WebAssembly Text (WAT) —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –≤ –±–∏–Ω–∞—Ä–Ω—ã–π WASM —Ñ–∞–π–ª.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ WAT
./build/wasm_compiler tests/001_expressions.pi output.wat

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ WASM, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω wat2wasm)
./run_wasm_test.sh tests/001_expressions.pi

# –ó–∞–ø—É—Å–∫ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ WASM —Ñ–∞–π–ª–∞
wasmtime output.was
# –∏–ª–∏
wasmer output.was
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ WAT –≤ WASM –∏ –∑–∞–ø—É—Å–∫–∞:
- `wat2wasm` (–∏–∑ –ø–∞–∫–µ—Ç–∞ wabt): `brew install wabt` –∏–ª–∏ `apt-get install wabt`
- `wasmtime` –∏–ª–∏ `wasmer` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ WASM —Ñ–∞–π–ª–æ–≤

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (integer, real, boolean)
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ (routine)
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (if-then-else)
- ‚úÖ –¶–∏–∫–ª—ã (while, for)
- ‚úÖ –í—ã—Ä–∞–∂–µ–Ω–∏—è (–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)
- ‚úÖ –í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ Print (–±–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ WASI)
- ‚ö†Ô∏è –ú–∞—Å—Å–∏–≤—ã (—á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ö†Ô∏è Records (—á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)

## –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (6 –Ω–æ—è–±—Ä—è 2024)

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ:
```bash
./run_semantic_tests.sh
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
./build/semantic_analyzer tests/semantic_006_all_optimizations.pi
```

---

**Innopolis University, 2025**
**Compiler Construction Course**